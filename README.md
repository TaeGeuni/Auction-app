# 실시간 경매 어플 개발 설계서

## 1. 개요
Golang을 활용하여 WebSocket 기반의 실시간 경매 어플을 개발한다. 관리자가 상품을 등록하면 이용자는 본인 확인 후 경매에 참여할 수 있으며, 입찰 시 5%씩 가격이 증가하는 방식이다.

## 2. 핵심 기능
### 2.1 관리자 기능
- 경매 상품 등록
- 경매 시작가 설정
- 경매 시작 및 종료 관리

### 2.2 이용자 기능
- 본인 인증 완료된 계정만 경매 참여 가능
- 최대 희망 가격 설정 가능
- 터치 버튼을 통한 입찰 (5% 증가)
- 입찰 전 **이중 확인 메시지** 표시
- 최대 희망 가격 초과 시 **경고 메시지** 표시
- 보유 금액 초과 시 입찰 제한
- 경매 종료 후 최고 입찰자가 낙찰
- 낙찰자는 일정 시간 내에 결제 진행 필수
- 입찰 후 구매 거부 시 패널티 적용 (경매 참여 제한 등)
- 경매 진행 시간 동안 자유롭게 입·출입 가능
- 경매 도중 입장한 사용자도 실시간 참여 가능
- 최고가 입찰자가 경매방을 나갔다가 다시 들어오면 서버에서 해당 사용자가 최고가 입찰자임을 알림

## 3. 시스템 아키텍처
```
[Client (React/Flutter)]  <-- WebSocket -->  [Golang Backend]  <-- MySQL / Redis -->  [Database]
```
- **Client**: React (Next.js) 또는 Flutter
- **Backend**: Golang (Gin + WebSocket)
- **Database**: MySQL + Redis (캐싱)

## 4. WebSocket 기반 경매 흐름
1. **경매 시작**: 관리자가 상품을 등록하고 WebSocket 채널 개설
2. **이용자 입장**: 본인 인증된 이용자가 입장 (경매 시간 중 자유로운 입·출입 가능)
3. **최대 희망 가격 설정**: 사용자가 미리 최대 금액 설정 가능
4. **입찰 진행**:
   - 버튼 터치 시 입찰가 5% 증가
   - 입찰 확인 메시지 표시 (입찰 여부 재확인)
   - 최대 희망 가격 초과 시 경고 메시지 표시
   - 보유 금액 초과 시 입찰 차단
5. **경매 진행 중 입출입**:
   - 새로 입장한 사용자도 실시간으로 경매 참여 가능
   - 최고가 입찰자가 다시 입장하면 서버에서 해당 정보를 제공
6. **경매 종료**: 최종 입찰자가 낙찰
7. **결제 및 정산**:
   - 낙찰자는 일정 시간 내 결제 진행 필수
   - 결제 거부 시 패널티 적용 (경매 참여 제한)
   - 결제 완료 후 상품 거래 확정

## 5. API 설계 (예시)
### 5.1 사용자 인증
```http
POST /api/auth/login
```
- Request: `{ "email": "user@example.com", "password": "123456" }`
- Response: `{ "token": "jwt-token" }`

### 5.2 경매 등록
```http
POST /api/auction
```
- Request: `{ "item": "MacBook Pro", "start_price": 100000, "duration": 30 }`
- Response: `{ "auction_id": 1, "status": "started" }`

### 5.3 입찰 요청 (WebSocket)
```json
{
  "type": "bid",
  "auction_id": 1,
  "user_id": 10,
  "bid_amount": 100500
}
```

## 6. 사용 기술 스택
| 영역       | 기술 스택 |
|------------|--------------|
| Backend   | Golang (Gin, WebSocket) |
| Frontend  | React (Next.js) / Flutter |
| Database  | MySQL, Redis |
| Auth      | JWT 기반 인증 |
| Hosting   | AWS EC2, S3 |

## 7. 유의사항
1. **입찰 후 구매 확정 절차**
   - 최종 낙찰자는 일정 시간 내에 결제를 진행해야 함.
   - 결제 확인 후 상품 거래 확정.

2. **입찰 후 구매 거부 시 패널티**
   - 낙찰자가 결제를 진행하지 않으면 일정 기간 경매 참여 제한.
   - 반복적으로 구매 거부 시 계정 정지 또는 패널티 부과.

3. **비정상적인 입찰 방지**
   - 입찰 시 보유 금액을 실시간으로 검증하여 허위 입찰 방지.
   - 동일 사용자의 반복 입찰 제한 가능 (필요 시 설정).

4. **서버 성능 및 안정성 고려**
   - WebSocket 연결 유지 및 실시간 데이터 동기화에 대한 부하 관리 필요.
   - Redis 등을 활용한 경매 데이터 캐싱 및 최적화.

## 8. 개발 일정
1. **Week 1**: 요구사항 분석 및 DB 설계
2. **Week 2**: Golang Backend 개발
3. **Week 3**: WebSocket 실시간 입찰 구현
4. **Week 4**: 프론트엔드 연동
5. **Week 5**: 테스트 및 배포

---

이 설계서를 기반으로 프로젝트를 진행할 예정이며, 개발 중 변경사항이 발생할 수 있음.
